<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2192px" preserveAspectRatio="none" style="width:1019px;height:2192px;" version="1.1" viewBox="0 0 1019 2192" width="1019px" zoomAndPan="magnify"><defs><filter height="300%" id="fts3tfjfg12j7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="691" x="160.5" y="28.708">Scenario: A Participant Is Consolidating 2 Coins (Alice1, Alice2) Into 1 (Bob)</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="0" x="509" y="49.6611"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="197.4688"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="234.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="255.7344"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="143.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="547.5938"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="234.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="720.6563"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1027.6484"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1185.5781"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1386.6406"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1587.7031"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1645.9688"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1803.8984"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="2077.2578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="46" x2="46" y1="123.2031" y2="498.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="46" x2="46" y1="498.4609" y2="526.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="46" x2="46" y1="526.4609" y2="2124.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="218" x2="218" y1="123.2031" y2="498.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="218" x2="218" y1="498.4609" y2="526.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="218" x2="218" y1="526.4609" y2="2124.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="765" x2="765" y1="123.2031" y2="498.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="765" x2="765" y1="498.4609" y2="526.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="765" x2="765" y1="526.4609" y2="2124.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="836" x2="836" y1="123.2031" y2="498.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="836" x2="836" y1="498.4609" y2="526.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="836" x2="836" y1="526.4609" y2="2124.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="900" x2="900" y1="123.2031" y2="498.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="900" x2="900" y1="498.4609" y2="526.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="900" x2="900" y1="526.4609" y2="2124.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="970" x2="970" y1="2029.9766" y2="2124.3906"/><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="9" y="83.9063"/><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="5" y="87.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="12" y="107.9014">Satoshis</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="9" y="2123.3906"/><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="5" y="2127.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="12" y="2147.3857">Satoshis</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="100" x="166" y="87.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="173" y="107.9014">Coordinator</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="100" x="166" y="2123.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="173" y="2143.3857">Coordinator</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="734" y="87.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="741" y="107.9014">Alice1</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="734" y="2123.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="741" y="2143.3857">Alice1</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="806" y="87.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="813" y="107.9014">Alice2</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="806" y="2123.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="813" y="2143.3857">Alice2</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="43" x="877" y="87.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="884" y="107.9014">Bob</text><rect fill="#FEFECE" filter="url(#fts3tfjfg12j7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="43" x="877" y="2123.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="884" y="2143.3857">Bob</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="934" y="2136.3857">Mempool</text><path d="M952.5,2149.6875 C952.5,2139.6875 970.5,2139.6875 970.5,2139.6875 C970.5,2139.6875 988.5,2139.6875 988.5,2149.6875 L988.5,2175.6875 C988.5,2185.6875 970.5,2185.6875 970.5,2185.6875 C970.5,2185.6875 952.5,2185.6875 952.5,2175.6875 L952.5,2149.6875 " fill="#FEFECE" filter="url(#fts3tfjfg12j7)" style="stroke:#000000;stroke-width:1.5;"/><path d="M952.5,2149.6875 C952.5,2159.6875 970.5,2159.6875 970.5,2159.6875 C970.5,2159.6875 988.5,2159.6875 988.5,2149.6875 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="197.4688"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="234.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="255.7344"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="143.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="547.5938"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="234.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="720.6563"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1027.6484"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1185.5781"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1386.6406"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1587.7031"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1645.9688"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="128.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="1803.8984"/><rect fill="#FFFFFF" filter="url(#fts3tfjfg12j7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="213" y="2077.2578"/><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1012" x="0" y="153.7695"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="153.7695" y2="153.7695"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="156.7695" y2="156.7695"/><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="159" x="426.5" y="143.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="432.5" y="159.27">Input Registration</text><polygon fill="#A80036" points="201,193.4688,211,197.4688,201,201.4688,205,197.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="46" x2="207" y1="197.4688" y2="197.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="53" y="192.4028">GET coordinator-status</text><polygon fill="#A80036" points="57,222.6016,47,226.6016,57,230.6016,53,226.6016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51" x2="217" y1="226.6016" y2="226.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="63" y="221.5356">RoundStatuses[]</text><polygon fill="#A80036" points="234,251.7344,224,255.7344,234,259.7344,230,255.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="764" y1="255.7344" y2="255.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497" x="240" y="250.6685">POST inputs-registration: RoundId, (Input, RoundParamSig)[], ZeroCredReqs[]</text><path d="M228,268.7344 L228,459.7344 L417,459.7344 L417,278.7344 L407,268.7344 L228,268.7344 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M407,268.7344 L407,278.7344 L417,278.7344 L407,268.7344 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="285.8013">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="234" y="300.9341">IsInputRegistrationPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="234" y="316.0669">AllUnspent()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="234" y="331.1997">AllConfirmed()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="234" y="346.3325">AllMature()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="234" y="361.4653">AllStandardScript()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="234" y="376.5981">AllNotMalleable()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="234" y="391.731">CheckRoundParamSigs()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="234" y="406.8638">AllAllowedIfBlameRound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="234" y="421.9966">AllNotBanned()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="234" y="437.1294">UpdateIfDuplicateInput()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="234" y="452.2622">SetAliceDeadline()</text><polygon fill="#A80036" points="753,486.4609,763,490.4609,753,494.4609,757,490.4609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="759" y1="490.4609" y2="490.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="225" y="485.395">AliceId, ZeroCreds[]</text><polygon fill="#A80036" points="234,543.5938,224,547.5938,234,551.5938,230,547.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="764" y1="547.5938" y2="547.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="523" x="240" y="542.5278">POST connection-confirmation: RoundId, AliceId, RealCredReqs[], ZeroCredReqs[]</text><path d="M228,560.5938 L228,660.5938 L587,660.5938 L587,570.5938 L577,560.5938 L228,560.5938 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M577,560.5938 L577,570.5938 L587,570.5938 L577,560.5938 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="577.6606">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="234" y="592.7935">IsInputRegistrationOrConnectionConfirmationPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="234" y="607.9263">IsAliceFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="234" y="623.0591">EnsureUniqueSerialNumber()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="234" y="638.1919">CheckCredProofs()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="234" y="653.3247">ResetAliceDeadline()</text><polygon fill="#A80036" points="753,687.5234,763,691.5234,753,695.5234,757,691.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="759" y1="691.5234" y2="691.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="225" y="686.4575">ZeroCreds[]</text><polygon fill="#A80036" points="234,716.6563,224,720.6563,234,724.6563,230,720.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="835.5" y1="720.6563" y2="720.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497" x="240" y="715.5903">POST inputs-registration: RoundId, (Input, RoundParamSig)[], ZeroCredReqs[]</text><path d="M228,733.6563 L228,924.6563 L417,924.6563 L417,743.6563 L407,733.6563 L228,733.6563 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M407,733.6563 L407,743.6563 L417,743.6563 L407,733.6563 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="750.7231">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="234" y="765.856">IsInputRegistrationPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="234" y="780.9888">AllUnspent()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="234" y="796.1216">AllConfirmed()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="234" y="811.2544">AllMature()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="234" y="826.3872">AllStandardScript()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="234" y="841.52">AllNotMalleable()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="234" y="856.6528">CheckRoundParamSigs()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="234" y="871.7856">AllAllowedIfBlameRound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="234" y="886.9185">AllNotBanned()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="234" y="902.0513">UpdateIfDuplicateInput()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="234" y="917.1841">SetAliceDeadline()</text><polygon fill="#A80036" points="824.5,951.3828,834.5,955.3828,824.5,959.3828,828.5,955.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="830.5" y1="955.3828" y2="955.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="225" y="950.3169">AliceId, ZeroCreds[]</text><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1012" x="0" y="983.9492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="983.9492" y2="983.9492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="986.9492" y2="986.9492"/><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="211" x="400.5" y="973.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192" x="406.5" y="989.4497">Connection Confirmation</text><polygon fill="#A80036" points="234,1023.6484,224,1027.6484,234,1031.6484,230,1027.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="764" y1="1027.6484" y2="1027.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="523" x="240" y="1022.5825">POST connection-confirmation: RoundId, AliceId, RealCredReqs[], ZeroCredReqs[]</text><path d="M228,1040.6484 L228,1125.6484 L587,1125.6484 L587,1050.6484 L577,1040.6484 L228,1040.6484 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M577,1040.6484 L577,1050.6484 L587,1050.6484 L577,1040.6484 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="1057.7153">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="234" y="1072.8481">IsInputRegistrationOrConnectionConfirmationPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="234" y="1087.981">IsAliceFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="234" y="1103.1138">EnsureUniqueSerialNumber()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="234" y="1118.2466">CheckCredProofs()</text><polygon fill="#A80036" points="753,1152.4453,763,1156.4453,753,1160.4453,757,1156.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="759" y1="1156.4453" y2="1156.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="225" y="1151.3794">RealCreds[], ZeroCreds[]</text><polygon fill="#A80036" points="234,1181.5781,224,1185.5781,234,1189.5781,230,1185.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="835.5" y1="1185.5781" y2="1185.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="523" x="240" y="1180.5122">POST connection-confirmation: RoundId, AliceId, RealCredReqs[], ZeroCredReqs[]</text><path d="M228,1198.5781 L228,1283.5781 L587,1283.5781 L587,1208.5781 L577,1198.5781 L228,1198.5781 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M577,1198.5781 L577,1208.5781 L587,1208.5781 L577,1198.5781 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="1215.645">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="234" y="1230.7778">IsInputRegistrationOrConnectionConfirmationPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="234" y="1245.9106">IsAliceFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="234" y="1261.0435">EnsureUniqueSerialNumber()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="234" y="1276.1763">CheckCredProofs()</text><polygon fill="#A80036" points="824.5,1310.375,834.5,1314.375,824.5,1318.375,828.5,1314.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="830.5" y1="1314.375" y2="1314.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="225" y="1309.3091">RealCreds[], ZeroCreds[]</text><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1012" x="0" y="1342.9414"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="1342.9414" y2="1342.9414"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="1345.9414" y2="1345.9414"/><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="173" x="419.5" y="1332.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="154" x="425.5" y="1348.4419">Output Registration</text><polygon fill="#A80036" points="234,1382.6406,224,1386.6406,234,1390.6406,230,1386.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="899.5" y1="1386.6406" y2="1386.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="391" x="240" y="1381.5747">POST output-registration: RoundId, Output, PresentedCreds[]</text><path d="M228,1399.6406 L228,1484.6406 L433,1484.6406 L433,1409.6406 L423,1399.6406 L228,1399.6406 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M423,1399.6406 L423,1409.6406 L433,1409.6406 L423,1399.6406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="1416.7075">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="234" y="1431.8403">IsOutputRegistrationPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="234" y="1446.9731">IsStandardScript()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="234" y="1462.106">EnsureUniqueSerialNumber()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="234" y="1477.2388">CheckCredProofs()</text><polygon fill="#A80036" points="888.5,1511.4375,898.5,1515.4375,888.5,1519.4375,892.5,1515.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="894.5" y1="1515.4375" y2="1515.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="225" y="1510.3716">UnsignedTransactionSecret</text><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1012" x="0" y="1544.0039"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="1544.0039" y2="1544.0039"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="1547.0039" y2="1547.0039"/><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="169" x="421.5" y="1533.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="150" x="427.5" y="1549.5044">Transaction Signing</text><polygon fill="#A80036" points="201,1583.7031,211,1587.7031,201,1591.7031,205,1587.7031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="46" x2="207" y1="1587.7031" y2="1587.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="53" y="1582.6372">coordinator-status</text><polygon fill="#A80036" points="57,1612.8359,47,1616.8359,57,1620.8359,53,1616.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51" x2="217" y1="1616.8359" y2="1616.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="63" y="1611.77">RoundStatuses[]</text><polygon fill="#A80036" points="234,1641.9688,224,1645.9688,234,1649.9688,230,1645.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="764" y1="1645.9688" y2="1645.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421" x="240" y="1640.9028">POST transaction-signatures: RoundId, AliceId, (Input, Signature)[]</text><path d="M228,1658.9688 L228,1743.9688 L429,1743.9688 L429,1668.9688 L419,1658.9688 L228,1658.9688 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M419,1658.9688 L419,1668.9688 L429,1668.9688 L419,1658.9688 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="1676.0356">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="234" y="1691.1685">IsTransactionSigningPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="234" y="1706.3013">IsAliceFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="234" y="1721.4341">CheckInputSignatures()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="234" y="1736.5669">UpdateIfAlreadySigned()</text><polygon fill="#A80036" points="753,1770.7656,763,1774.7656,753,1778.7656,757,1774.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="759" y1="1774.7656" y2="1774.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="225" y="1769.6997">ACK</text><polygon fill="#A80036" points="234,1799.8984,224,1803.8984,234,1807.8984,230,1803.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="228" x2="835.5" y1="1803.8984" y2="1803.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421" x="240" y="1798.8325">POST transaction-signatures: RoundId, AliceId, (Input, Signature)[]</text><path d="M228,1816.8984 L228,1901.8984 L429,1901.8984 L429,1826.8984 L419,1816.8984 L228,1816.8984 " fill="#FBFB77" filter="url(#fts3tfjfg12j7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M419,1816.8984 L419,1826.8984 L429,1826.8984 L419,1816.8984 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="234" y="1833.9653">IsRoundFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="234" y="1849.0981">IsTransactionSigningPhase()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="234" y="1864.231">IsAliceFound()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="234" y="1879.3638">CheckInputSignatures()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="234" y="1894.4966">UpdateIfAlreadySigned()</text><polygon fill="#A80036" points="824.5,1928.6953,834.5,1932.6953,824.5,1936.6953,828.5,1932.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218" x2="830.5" y1="1932.6953" y2="1932.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="225" y="1927.6294">ACK</text><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1012" x="0" y="1961.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="1961.2617" y2="1961.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1012" y1="1964.2617" y2="1964.2617"/><rect fill="#EEEEEE" filter="url(#fts3tfjfg12j7)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="216" x="398" y="1950.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="197" x="404" y="1966.7622">Transaction Broadcasting</text><polygon fill="#A80036" points="922,2000.9609,932,2004.9609,922,2008.9609,926,2004.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="218" x2="928" y1="2004.9609" y2="2004.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="225" y="1999.895">SignedTransaction</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="934" y="2042.8232">Mempool</text><path d="M952.5,1993.8281 C952.5,1983.8281 970.5,1983.8281 970.5,1983.8281 C970.5,1983.8281 988.5,1983.8281 988.5,1993.8281 L988.5,2019.8281 C988.5,2029.8281 970.5,2029.8281 970.5,2029.8281 C970.5,2029.8281 952.5,2029.8281 952.5,2019.8281 L952.5,1993.8281 " fill="#FEFECE" filter="url(#fts3tfjfg12j7)" style="stroke:#000000;stroke-width:1.5;"/><path d="M952.5,1993.8281 C952.5,2003.8281 970.5,2003.8281 970.5,2003.8281 C970.5,2003.8281 988.5,2003.8281 988.5,1993.8281 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="201,2073.2578,211,2077.2578,201,2081.2578,205,2077.2578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="46" x2="207" y1="2077.2578" y2="2077.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="53" y="2072.1919">coordinator-status</text><polygon fill="#A80036" points="57,2102.3906,47,2106.3906,57,2110.3906,53,2106.3906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51" x2="217" y1="2106.3906" y2="2106.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="63" y="2101.3247">RoundStatuses[]</text><!--MD5=[17b66708572e8bd05c23133868293259]
@startuml
collections Satoshis
participant Coordinator
participant Alice1
participant Alice2
participant Bob
database Mempool

title Scenario: A Participant Is Consolidating 2 Coins (Alice1, Alice2) Into 1 (Bob)\n

== Input Registration ==

Satoshis -> Coordinator ++ : GET coordinator-status
return RoundStatuses[]

Alice1 -> Coordinator ++: POST inputs-registration: RoundId, (Input, RoundParamSig)[], ZeroCredReqs[]
note right of Coordinator
    IsRoundFound()
    IsInputRegistrationPhase()
    AllUnspent()
    AllConfirmed()
    AllMature()
    AllStandardScript()
    AllNotMalleable()
    CheckRoundParamSigs()
    AllAllowedIfBlameRound()
    AllNotBanned()
    UpdateIfDuplicateInput()
    SetAliceDeadline()
end note
return AliceId, ZeroCreds[]
...

Alice1 -> Coordinator ++: POST connection-confirmation: RoundId, AliceId, RealCredReqs[], ZeroCredReqs[]
note right of Coordinator
    IsRoundFound()
    IsInputRegistrationOrConnectionConfirmationPhase()
    IsAliceFound()
    EnsureUniqueSerialNumber()
    CheckCredProofs()
    ResetAliceDeadline()
end note
return ZeroCreds[]

Alice2 -> Coordinator ++: POST inputs-registration: RoundId, (Input, RoundParamSig)[], ZeroCredReqs[]
note right of Coordinator
    IsRoundFound()
    IsInputRegistrationPhase()
    AllUnspent()
    AllConfirmed()
    AllMature()
    AllStandardScript()
    AllNotMalleable()
    CheckRoundParamSigs()
    AllAllowedIfBlameRound()
    AllNotBanned()
    UpdateIfDuplicateInput()
    SetAliceDeadline()
end note
return AliceId, ZeroCreds[]

== Connection Confirmation ==

Alice1 -> Coordinator ++: POST connection-confirmation: RoundId, AliceId, RealCredReqs[], ZeroCredReqs[]
note right of Coordinator
    IsRoundFound()
    IsInputRegistrationOrConnectionConfirmationPhase()
    IsAliceFound()
    EnsureUniqueSerialNumber()
    CheckCredProofs()
end note
return RealCreds[], ZeroCreds[]

Alice2 -> Coordinator ++: POST connection-confirmation: RoundId, AliceId, RealCredReqs[], ZeroCredReqs[]
note right of Coordinator
    IsRoundFound()
    IsInputRegistrationOrConnectionConfirmationPhase()
    IsAliceFound()
    EnsureUniqueSerialNumber()
    CheckCredProofs()
end note
return RealCreds[], ZeroCreds[]

== Output Registration ==

Bob -> Coordinator ++: POST output-registration: RoundId, Output, PresentedCreds[]
note right of Coordinator
    IsRoundFound()
    IsOutputRegistrationPhase()
    IsStandardScript()
    EnsureUniqueSerialNumber()
    CheckCredProofs()
end note
return UnsignedTransactionSecret

== Transaction Signing ==

Satoshis -> Coordinator ++ : coordinator-status
return RoundStatuses[]

Alice1 -> Coordinator ++: POST transaction-signatures: RoundId, AliceId, (Input, Signature)[]
note right of Coordinator
    IsRoundFound()
    IsTransactionSigningPhase()
    IsAliceFound()
    CheckInputSignatures()
    UpdateIfAlreadySigned()
end note
return ACK

Alice2 -> Coordinator ++: POST transaction-signatures: RoundId, AliceId, (Input, Signature)[]
note right of Coordinator
    IsRoundFound()
    IsTransactionSigningPhase()
    IsAliceFound()
    CheckInputSignatures()
    UpdateIfAlreadySigned()
end note
return ACK

== Transaction Broadcasting ==

Coordinator -> Mempool**  : SignedTransaction

Satoshis -> Coordinator ++ : coordinator-status
return RoundStatuses[]
@enduml

PlantUML version 1.2021.01(Tue Feb 02 07:55:08 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>